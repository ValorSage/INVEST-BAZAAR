# 1. هيكل المشروع

لفهم كيفية تنظيم الكود، من المهم معرفة الغرض من كل مجلد وملف في المشروع.

## نظرة عامة على الهيكل

```
.
├── api/                      # (جديد) وحدة الاتصال بالخادم (API Layer)
├── components/               # مكونات React القابلة لإعادة الاستخدام
├── data/                     # البيانات الثابتة (مثل قائمة الدول)
├── docs/                     # ملفات التوثيق التفصيلية (هذا المجلد)
├── hooks/                    # Hooks مخصصة لـ React
├── App.tsx                   # المكون الرئيسي للتطبيق
├── index.html                # ملف HTML الرئيسي
├── index.tsx                 # نقطة الدخول لتطبيق React
├── metadata.json             # بيانات وصفية للمشروع
├── types.ts                  # تعريفات TypeScript
└── README.md                 # ملف التوثيق الرئيسي
```

## شرح المجلدات

### `api/` (جديد)
هذا المجلد هو الخطوة الأولى نحو تحويل التطبيق ليعمل مع خادم حقيقي.
- **`apiClient.ts`**: هذا الملف سيكون مسؤولاً عن جميع طلبات الشبكة (API calls) إلى الخادم. بدلاً من استدعاء `localStorage` مباشرة في المكونات، سنقوم باستدعاء دوال من هذا الملف (مثل `loginUser`, `fetchCounters`). هذا النهج يسمى "طبقة الخدمة" (Service Layer) وهو يفصل منطق الواجهة عن منطق الاتصال بالخادم، مما يجعل الكود أكثر تنظيمًا وسهولة في الصيانة.

### `components/`
هذا المجلد هو قلب واجهة المستخدم. يحتوي على جميع مكونات React التي تشكل الشاشات والأجزاء المختلفة من التطبيق. كل مكون مسؤول عن جزء معين من الواجهة، مما يجعل الكود منظمًا وسهل الصيانة.

- **`Auth.tsx`**: مسؤول عن واجهة تسجيل الدخول وإنشاء الحساب.
- **`Header.tsx`**: الشريط العلوي الذي يعرض أرصدة المستخدم.
- **`MainCounter.tsx`**: الشاشة الرئيسية التي تظهر بعد شراء العداد.
- **`Store.tsx`**: متجر شراء العدادات.
- **`Chat.tsx`, `RoomView.tsx`, `CreateRoomModal.tsx`**: مكونات نظام الدردشة.
- **`icons.tsx`**: ملف مركزي لجميع أيقونات SVG المستخدمة في التطبيق.

### `data/`
يحتوي على البيانات الثابتة التي لا تتغير أثناء تشغيل التطبيق.
- **`countries.ts`**: مصفوفة تحتوي على قائمة الدول ورموز الاتصال الخاصة بها، وتُستخدم في شاشات التسجيل وتوثيق الحساب.

### `docs/`
يحتوي على ملفات التوثيق التفصيلية (مثل هذا الملف) التي تشرح كل جانب من جوانب المشروع لمساعدة المطورين الجدد.

### `hooks/`
يحتوي على "Hooks" مخصصة لـ React. الـ Hooks هي وظائف تسمح لك "بالتعلق" بميزات React.
- **`useLocalStorage.ts`**: Hook حيوي جدًا في هذا المشروع **حاليًا**. يقوم تلقائيًا بحفظ وتحديث الحالة (State) في `localStorage` بالمتصفح. **عند الانتقال إلى خادم حقيقي، سيتم استبدال استخدامه تدريجيًا.**
- **`useCountdown.ts`**: Hook لإدارة وعرض العد التنازلي، يُستخدم في عداد الـ 24 ساعة.

## شرح الملفات الرئيسية

- **`index.html`**:
  - **الوظيفة**: الصفحة الأساسية التي يتم تحميلها في المتصفح.
  - **محتويات**: تحتوي على عنصر `<div id="root"></div>` الذي يعمل كنقطة إدخال لتطبيق React. كما تقوم بتحميل TailwindCSS والخطوط اللازمة.

- **`index.tsx`**:
  - **الوظيفة**: نقطة البداية لتطبيق React.
  - **محتويات**: يستخدم `ReactDOM` لربط المكون الرئيسي (`App.tsx`) بـ `index.html`.

- **`App.tsx`**:
  - **الوظيفة**: المكون الأب الذي يحتوي على كل منطق التطبيق الرئيسي.
  - **محتويات**:
    - إدارة الحالة العامة مثل المستخدم المسجل حاليًا، النقاط، الجواهر، الإشعارات، وغرف الدردشة.
    - منطق التنقل بين الشاشات المختلفة (مثل الشاشة الرئيسية، المتجر، الملف الشخصي، الدردشة).
    - تعريف الوظائف الرئيسية (مثل `handleBuyCounter`, `handleGiftCounter`, `handleSendMessage`) وتمريرها إلى المكونات الفرعية.

- **`types.ts`**:
  - **الوظيفة**: ملف مركزي لتعريفات TypeScript.
  - **محتويات**: يحتوي على `interfaces` مثل `User`, `Counter`, `Notification`, `ChatMessage` التي تصف شكل البيانات في التطبيق. هذا يساعد في منع الأخطاء ويجعل الكود أكثر قابلية للقراءة.